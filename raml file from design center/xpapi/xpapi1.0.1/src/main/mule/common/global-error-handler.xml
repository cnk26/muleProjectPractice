<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:api-gateway="http://www.mulesoft.org/schema/mule/api-gateway"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/api-gateway http://www.mulesoft.org/schema/mule/api-gateway/current/mule-api-gateway.xsd">
	<error-handler name="app-flowglobal-error-handlerError_Handler" doc:id="db93c6e0-58c1-45de-b86e-9d0df26b4d74" >
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="b9f41adc-88af-44e1-b6fe-a93b13a5d888" >
			<ee:transform doc:name="Transform Message resource not HTTP:Connectivity" doc:id="9afe550f-f133-46e3-a43f-5ba0f785562f">
				<ee:message>
					<ee:set-payload><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-payload>
				</ee:message>
				<ee:variables>
				<ee:set-variable variableName="type"><![CDATA[error.errorType.identifier]]></ee:set-variable>
					<ee:set-variable variableName="code"><![CDATA[404]]></ee:set-variable>
					<ee:set-variable variableName="title"><![CDATA[error.description]]></ee:set-variable>
					<ee:set-variable variableName="detail"><![CDATA[error.detailedDescription]]></ee:set-variable>
					<ee:set-variable variableName="httpStatus"><![CDATA[404]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
			<flow-ref doc:name="Flow Reference" doc:id="32750a35-7bd9-43ae-bb2d-f2b38bb924af" name="error-details-data" />
			<logger level="INFO" doc:name="Logger" doc:id="afa862da-cacf-405a-bcce-d41e9f0ba3e1" message="#[output application/json&#10;---&#10;{&#10;	TimeStamp: now(),&#10;transactionId: vars.headers.'x-cms-transactionId',&#10;AppName: app.name,&#10;FlowName: flow.name,&#10;Category: &quot;Customer&quot;,&#10;OriginationApplication: &quot;Process API &quot;,&#10;txnState: &quot;ERROR&quot;&#10;}]" />
		</on-error-propagate>
	</error-handler>
	<error-handler name="apikit-global-error-handlerError_Handler" doc:id="3088651e-9c45-48e8-9bc6-8251ca473ae0" >
		<on-error-propagate type="APIKIT:BAD_REQUEST">
			<ee:transform doc:name="Transform Message" doc:id="d2cbc2f5-b0eb-450b-a6f6-ae6169f3e23e">
				<ee:message>
				
					<ee:set-payload><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-payload>
				</ee:message>
				<ee:variables>
					<ee:set-variable variableName="code"><![CDATA[p('error.bad-request.code')]]></ee:set-variable>
					<ee:set-variable variableName="type"><![CDATA[p('error.bad-request.type')]]></ee:set-variable>
					<ee:set-variable variableName="title"><![CDATA[p('error.bad-request.title')]]></ee:set-variable>
					<ee:set-variable variableName="details"><![CDATA[p('error.bad-request.details')]]></ee:set-variable>
					<ee:set-variable variableName="httpStatus"><![CDATA[p('error.bad-request.code')]]></ee:set-variable>
				</ee:variables>
			</ee:transform>
			<flow-ref doc:name="Flow Reference" doc:id="1846e1d8-8d3e-427c-9c74-5d42d056a9d8" name="error-details-data" />
			<logger level="INFO" doc:name="Logger" doc:id="321ece45-638d-4609-bcf8-6eab307e789b" message="#[%dw 2.0&#10;output application/json&#10;---&#10;{&#10;	TimeStamp: now(),&#10;transactionId: vars.headers.'x-cms-transactionId',&#10;AppName: app.name,&#10;FlowName: flow.name,&#10;Category: &quot;Customer&quot;,&#10;OriginationApplication: &quot;Process API &quot;,&#10;txnState: &quot;ERROR&quot;,&#10;}]" />
            
</on-error-propagate>
		<on-error-propagate type="APIKIT:NOT_FOUND">          
			<ee:transform doc:name="Transform Message resource not found" doc:id="df1e0a0e-b915-4021-9fc7-822d8387adeb">
				<ee:message>
					<ee:set-payload><![CDATA[%dw 2.0
output application/java
---
{
}]]></ee:set-payload>
				</ee:message>
<ee:variables>
					<ee:set-variable variableName="code"><![CDATA[p('error.resource-not-found.code')]]></ee:set-variable>
					<ee:set-variable variableName="type"><![CDATA[p('error.resource-not-found.type')]]></ee:set-variable>
					<ee:set-variable variableName="title"><![CDATA[p('error.resource-not-found.title')]]></ee:set-variable>
					<ee:set-variable variableName="details"><![CDATA[p('error.resource-not-found.details')]]></ee:set-variable>
					<ee:set-variable variableName="httpStatus"><![CDATA[p('error.resource-not-found.code')]]></ee:set-variable>
				</ee:variables>				
			</ee:transform>
			<flow-ref doc:name="Flow Reference" doc:id="4cb185aa-7212-4730-9b81-671936643d05" name="error-details-data" />
			<logger level="INFO" doc:name="Copy_of_Logger" doc:id="08214165-74da-46d5-b6f0-57571ae1846c" message="#[%dw 2.0&#10;output application/json&#10;---&#10;{&#10;	TimeStamp: now(),&#10;transactionId: vars.headers.'x-cms-transactionId',&#10;AppName: app.name,&#10;FlowName: flow.name,&#10;Category: &quot;Customer&quot;,&#10;OriginationApplication: &quot;Process API &quot;,&#10;txnState: &quot;ERROR&quot;,&#10;}]" />
            
</on-error-propagate>
		<on-error-propagate type="APIKIT:METHOD_NOT_ALLOWED">
			<flow-ref doc:name="Flow Reference" doc:id="8a96a0b3-0e0f-4d58-b2c3-966b247e187e" name="error-details-data" />
			<logger level="INFO" doc:name="Copy_of_Logger" doc:id="6c07f863-cc68-436a-95e0-2e099fa39c86" message="#[%dw 2.0&#10;output application/json&#10;---&#10;{&#10;	TimeStamp: now(),&#10;transactionId: vars.headers.'x-cms-transactionId',&#10;AppName: app.name,&#10;FlowName: flow.name,&#10;Category: &quot;Customer&quot;,&#10;OriginationApplication: &quot;Process API &quot;,&#10;txnState: &quot;ERROR&quot;,&#10;}]" />
            
</on-error-propagate>
		<on-error-propagate type="APIKIT:NOT_ACCEPTABLE">
<flow-ref doc:name="Flow Reference" doc:id="1da92ecf-badd-4f45-a99b-7ecfc0f02e80" name="error-details-data" />     
			<logger level="INFO" doc:name="Copy_of_Logger" doc:id="7ca40945-758c-4c13-b42f-4ef7caf3c1ad" message="#[%dw 2.0&#10;output application/json&#10;---&#10;{&#10;	TimeStamp: now(),&#10;transactionId: vars.headers.'x-cms-transactionId',&#10;AppName: app.name,&#10;FlowName: flow.name,&#10;Category: &quot;Customer&quot;,&#10;OriginationApplication: &quot;Process API &quot;,&#10;txnState: &quot;ERROR&quot;,&#10;}]" />
            
</on-error-propagate>
		<on-error-propagate type="APIKIT:UNSUPPORTED_MEDIA_TYPE">
 <flow-ref doc:name="Flow Reference" doc:id="937dafb1-e594-4fa6-8313-18a07dc7f3f9" name="error-details-data" />
			<logger level="INFO" doc:name="Copy_of_Logger" doc:id="c381078a-8253-43ef-9cee-95307b35f5c8" message="#[%dw 2.0&#10;output application/json&#10;---&#10;{&#10;	TimeStamp: now(),&#10;transactionId: vars.headers.'x-cms-transactionId',&#10;AppName: app.name,&#10;FlowName: flow.name,&#10;Category: &quot;Customer&quot;,&#10;OriginationApplication: &quot;Process API &quot;,&#10;txnState: &quot;ERROR&quot;,&#10;}]" />
            
</on-error-propagate>
		<on-error-propagate type="APIKIT:NOT_IMPLEMENTED">
<flow-ref doc:name="Flow Reference" doc:id="72fb5444-ac51-421b-bced-18ea05b0f575" name="error-details-data" />
			<logger level="INFO" doc:name="Copy_of_Logger" doc:id="0906037a-170f-4ab9-acc3-cce34fbc01a0" message="#[%dw 2.0&#10;output application/json&#10;---&#10;{&#10;	TimeStamp: now(),&#10;transactionId: vars.headers.'x-cms-transactionId',&#10;AppName: app.name,&#10;FlowName: flow.name,&#10;Category: &quot;Customer&quot;,&#10;OriginationApplication: &quot;Process API &quot;,&#10;txnState: &quot;ERROR&quot;,&#10;}]" />
            
</on-error-propagate>

	
	</error-handler>
</mule>
